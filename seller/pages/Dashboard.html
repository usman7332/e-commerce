  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }


    /* Content */
    .main-content {
      padding: 20px;
      margin-top: 20px;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .main-content h1 {
      color: #232f3e;
      margin-bottom: 20px;
      font-size: 24px;
    }

    /* Metrics Grid */
    .metrics-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 40px;
    }

    .metric-card {
      flex: 1 1 220px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      border-left: 5px solid;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .metric-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
    }

    .metric-card p {
      opacity: 0.6;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .metric-value {
      font-size: 22px;
      font-weight: 700;
      color: #232f3e;
    }

    .metric-label {
      font-size: 12px;
      color: #666;
      margin-top: 8px;
    }

    .metric-change {
      font-size: 12px;
      color: #28a745;
      margin-top: 8px;
    }

    .metric-change.negative {
      color: #dc3545;
    }

    /* Charts Section */
    .charts-section {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
      margin-bottom: 40px;
    }

    .chart-card {
      flex: 1 1 48%;
      min-height: 300px;
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 15px;
    }

    .chart-title {
      font-size: 16px;
      font-weight: 600;
      color: #232f3e;
    }

    .chart-tabs {
      display: flex;
      gap: 10px;
    }

    .chart-tab {
      padding: 8px 16px;
      border: 1px solid #ddd;
      background-color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .chart-tab.active {
      background-color: #232f3e;
      color: white;
      border-color: #232f3e;
    }

    .chart-tab:hover {
      background-color: #f5f5f5;
    }

    canvas {
      max-width: 100%;
      max-height: 300px;
    }

    /* Notifications Panel */
    .notif-panel {
      position: fixed;
      top: 60px;
      right: 0;
      width: 380px;
      height: calc(100vh - 60px);
      background-color: white;
      border-left: 1px solid #ddd;
      box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
      transform: translateX(380px);
      transition: transform 0.3s ease;
      z-index: 500;
      overflow-y: auto;
    }

    .notif-panel.active {
      transform: translateX(0);
    }

    .notif-header {
      padding: 20px;
      border-bottom: 1px solid #ddd;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #232f3e;
      color: white;
    }

    .notif-title {
      font-size: 16px;
      font-weight: 600;
    }

    .notif-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    .notif-list {
      padding: 0;
      list-style: none;
    }

    .notif-item {
      padding: 15px 20px;
      border-bottom: 1px solid #ddd;
      transition: background-color 0.2s;
    }

    .notif-item:hover {
      background-color: #f5f5f5;
    }

    .notif-item.unread {
      background-color: #f0f8ff;
      border-left: 4px solid #0066c0;
    }

    .notif-item-title {
      font-size: 14px;
      font-weight: 600;
      color: #232f3e;
      margin-bottom: 5px;
    }

    .notif-item-text {
      font-size: 13px;
      color: #666;
      margin-bottom: 8px;
    }

    .notif-item-time {
      font-size: 12px;
      color: #999;
    }

    /* Orders Table */
    .orders-section {
      background-color: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #232f3e;
    }

    .search-filter {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .search-bar {
      position: relative;
      flex: 1;
      min-width: 200px;
    }

    .search-bar input {
      width: 100%;
      padding: 10px 15px 10px 40px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
    }

    .search-bar input:focus {
      outline: none;
      border-color: #232f3e;
      box-shadow: 0 0 0 3px rgba(35, 47, 62, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      font-size: 18px;
      pointer-events: none;
    }

    .filter-select {
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      background-color: white;
      cursor: pointer;
      min-width: 140px;
    }

    .filter-select:focus {
      outline: none;
      border-color: #232f3e;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    .data-table thead tr {
      border-bottom: 2px solid #ddd;
      background-color: #f5f5f5;
    }

    .data-table th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #232f3e;
      font-size: 13px;
      text-transform: uppercase;
    }

    .data-table tbody tr {
      border-bottom: 1px solid #ddd;
      transition: background-color 0.2s;
    }

    .data-table tbody tr:hover {
      background-color: #f5f5f5;
    }

    .data-table td {
      padding: 15px;
      font-size: 13px;
    }

    .order-id {
      font-weight: 600;
      color: #232f3e;
      cursor: pointer;
    }

    .order-id:hover {
      text-decoration: underline;
    }

    .product-info {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .product-img {
      width: 40px;
      height: 40px;
      background-color: #f5f5f5;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 18px;
    }

    .product-name {
      font-weight: 500;
      max-width: 200px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .status-pending {
      background-color: #fff3cd;
      color: #856404;
    }

    .status-shipped {
      background-color: #d1ecf1;
      color: #0c5460;
    }

    .status-delivered {
      background-color: #d4edda;
      color: #155724;
    }

    .status-cancelled {
      background-color: #f8d7da;
      color: #721c24;
    }

    .btn-view {
      background: none;
      border: none;
      color: #0066c0;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      padding: 5px 10px;
      transition: color 0.2s;
    }

    .btn-view:hover {
      color: #232f3e;
      text-decoration: underline;
    }

    /* Pagination */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .pagination button {
      padding: 8px 12px;
      border: 1px solid #ddd;
      background-color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .pagination button:hover {
      background-color: #f5f5f5;
      border-color: #232f3e;
    }

    .pagination button.active {
      background-color: #232f3e;
      color: white;
      border-color: #232f3e;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Responsive */
    @media (max-width: 1080px) {
      .chart-card {
        flex: 1 1 100%;
        min-height: 250px;
      }

      .metric-card {
        flex: 1 1 48%;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 260px;
        left: -260px;
      }

      .sidebar.active {
        left: 0;
      }

      .main-content {
        padding: 15px;
      }

      .toggle-btn {
        display: block;
      }

      .close-btn {
        display: block;
      }

      .metric-card {
        flex: 1 1 100%;
      }

      .section-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .search-filter {
        flex-direction: column;
        width: 100%;
      }

      .search-bar {
        width: 100%;
      }

      .filter-select {
        width: 100%;
      }

      .data-table {
        font-size: 12px;
      }

      .data-table th,
      .data-table td {
        padding: 10px;
      }

      .product-info {
        flex-direction: column;
        align-items: flex-start;
      }

      .notif-panel {
        width: 100%;
        transform: translateX(100%);
      }

      .notif-panel.active {
        transform: translateX(0);
      }
    }

    @media (max-width: 710px) {
      .metric-card {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
   
    <!-- Main Content -->
    <div class="main-content">
      <div class="page active" id="dashboardPage">
        <h1>Home Overview</h1>

        <!-- Metrics Grid -->
        <div class="metrics-grid">
          <div class="metric-card" style="border-left-color: #28a745;">
            <p>Total Products</p>
            <div class="metric-value" data-target="156">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +12 this week</div>
          </div>

          <div class="metric-card" style="border-left-color: #0066c0;">
            <p>Active Listings</p>
            <div class="metric-value" data-target="142">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +5 active</div>
          </div>

          <div class="metric-card" style="border-left-color: #ffc107;">
            <p>Out of Stock</p>
            <div class="metric-value" data-target="14">0</div>
            <div class="metric-change negative"><span class="material-symbols-rounded" style="font-size:16px">trending_down</span> -3 items</div>
          </div>

          <div class="metric-card" style="border-left-color: #dc3545;">
            <p>Total Orders</p>
            <div class="metric-value" data-target="1248">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +87 today</div>
          </div>

          <div class="metric-card" style="border-left-color: #17a2b8;">
            <p>Pending Orders</p>
            <div class="metric-value" data-target="23">0</div>
            <div class="metric-change negative"><span class="material-symbols-rounded" style="font-size:16px">trending_down</span> -5 than yesterday</div>
          </div>

          <div class="metric-card" style="border-left-color: #e83e8c;">
            <p>Return Requests</p>
            <div class="metric-value" data-target="7">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +2 new</div>
          </div>

          <div class="metric-card" style="border-left-color: #28a745;">
            <p>Total Sales (Daily)</p>
            <div class="metric-value" data-target="45230">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +15% vs yesterday</div>
          </div>

          <div class="metric-card" style="border-left-color: #20c997;">
            <p>Total Earnings</p>
            <div class="metric-value" data-target="28500">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> +8% vs last month</div>
          </div>

          <div class="metric-card" style="border-left-color: #ffc107;">
            <p>Payouts Pending</p>
            <div class="metric-value" data-target="5400">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> Payout in 3 days</div>
          </div>

          <div class="metric-card" style="border-left-color: #6f42c1;">
            <p>Seller Rating (%)</p>
            <div class="metric-value" data-target="48">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_up</span> Excellent performance</div>
          </div>

          <div class="metric-card" style="border-left-color: #dc3545;">
            <p>Total Refund Cost</p>
            <div class="metric-value" data-target="3450">0</div>
            <div class="metric-change"><span class="material-symbols-rounded" style="font-size:16px">trending_down</span> -2 refunds this month</div>
          </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
          <div class="chart-card">
            <div class="chart-header">
              <div class="chart-title">Sales Performance</div>
              <div class="chart-tabs">
                <button class="chart-tab active" data-chart="daily">Daily</button>
                <button class="chart-tab" data-chart="weekly">Weekly</button>
                <button class="chart-tab" data-chart="monthly">Monthly</button>
              </div>
            </div>
            <canvas id="salesChart" height="80"></canvas>
          </div>

          <div class="chart-card">
            <div class="chart-header">
              <div class="chart-title">Earnings Graph</div>
              <div class="chart-tabs">
                <button class="chart-tab active" data-chart="earnings-daily">Daily</button>
                <button class="chart-tab" data-chart="earnings-weekly">Weekly</button>
                <button class="chart-tab" data-chart="earnings-monthly">Monthly</button>
              </div>
            </div>
            <canvas id="earningsChart" height="80"></canvas>
          </div>
        </div>

        <!-- Recent Orders Section -->
        <div class="orders-section">
          <div class="section-header">
            <div class="section-title">Recent Orders</div>
            <div class="search-filter">
              <div class="search-bar">
                <span class="search-icon material-symbols-rounded">search</span>
                <input type="text" id="orderSearch" placeholder="Search by Order ID or Customer...">
              </div>
              <select class="filter-select" id="orderFilter">
                <option value="">All Status</option>
                <option value="Pending">Pending</option>
                <option value="Shipped">Shipped</option>
                <option value="Delivered">Delivered</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>
          </div>

          <table class="data-table" id="ordersTable">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Product</th>
                <th>Customer</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="ordersTableBody">
            </tbody>
          </table>

          <div id="ordersPagination" class="pagination"></div>
        </div>
      </div>
    </div>

    <!-- Notifications Panel -->
    <div class="notif-panel" id="notifPanel">
      <div class="notif-header">
        <div class="notif-title">Notifications</div>
        <button class="notif-close" id="notifClose">&times;</button>
      </div>
      <ul class="notif-list" id="notifList">
      </ul>
    </div>

    <!-- Order Details Modal -->
    <div class="modal" id="orderDetailsModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; display: none;">
      <div class="modal-content" style="background: white; border-radius: 10px; padding: 30px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #ddd; padding-bottom: 15px;">
          <h2 id="modalTitle" style="margin: 0; color: #232f3e;">Order Details</h2>
          <button id="closeOrderModal" style="background: none; border: none; font-size: 28px; cursor: pointer; color: #999;">&times;</button>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
          <div>
            <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">ORDER ID</label>
            <p id="detailOrderId" style="margin: 0; font-size: 16px; font-weight: 600; color: #232f3e;">-</p>
          </div>
          <div>
            <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">DATE</label>
            <p id="detailDate" style="margin: 0; font-size: 14px; color: #333;">-</p>
          </div>
        </div>

        <div style="margin-bottom: 20px; padding: 15px; background-color: #f9fafb; border-radius: 8px;">
          <h3 style="margin: 0 0 15px 0; color: #232f3e; font-size: 14px; font-weight: 600;">PRODUCT DETAILS</h3>
          <div>
            <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">PRODUCT</label>
            <p id="detailProduct" style="margin: 0 0 10px 0; font-size: 14px; color: #333;">-</p>
          </div>
          <div>
            <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">CUSTOMER</label>
            <p id="detailCustomer" style="margin: 0 0 10px 0; font-size: 14px; color: #333;">-</p>
          </div>
        </div>

        <div style="margin-bottom: 20px; padding: 15px; background-color: #f9fafb; border-radius: 8px;">
          <h3 style="margin: 0 0 15px 0; color: #232f3e; font-size: 14px; font-weight: 600;">AMOUNT & STATUS</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
              <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">AMOUNT</label>
              <p id="detailAmount" style="margin: 0; font-size: 16px; font-weight: 600; color: #28a745;">-</p>
            </div>
            <div>
              <label style="display: block; font-weight: 600; color: #666; margin-bottom: 5px; font-size: 12px;">STATUS</label>
              <p id="detailStatus" style="margin: 0; font-size: 14px; font-weight: 600; display: inline-block; padding: 6px 12px; border-radius: 20px; background-color: #e7f3ff; color: #0066c0;">-</p>
            </div>
          </div>
        </div>

        <div style="display: flex; gap: 10px; justify-content: flex-end;">
          <button id="closeOrderModalBtn" style="padding: 10px 20px; border: 1px solid #ddd; background-color: white; border-radius: 6px; cursor: pointer; font-weight: 600; color: #333;">Close</button>
        </div>
      </div>
    </div>
  </div>
 
  <script>
    
    console.log('Dashboard script loaded');
    
    // Sample Orders Data
    const orders = [
      { id: 'ORD-001', product: 'Wireless Headphones', customer: 'John Doe', amount: 89.99, status: 'Delivered', date: '2025-11-25' },
      { id: 'ORD-002', product: 'USB-C Cable', customer: 'Jane Smith', amount: 15.99, status: 'Shipped', date: '2025-11-24' },
      { id: 'ORD-003', product: 'Phone Case', customer: 'Mike Johnson', amount: 24.99, status: 'Pending', date: '2025-11-24' },
      { id: 'ORD-004', product: 'Screen Protector', customer: 'Sarah Williams', amount: 9.99, status: 'Delivered', date: '2025-11-23' },
      { id: 'ORD-005', product: 'Laptop Stand', customer: 'Tom Brown', amount: 45.99, status: 'Shipped', date: '2025-11-23' },
      { id: 'ORD-006', product: 'Keyboard', customer: 'Lisa Anderson', amount: 79.99, status: 'Cancelled', date: '2025-11-22' },
      { id: 'ORD-007', product: 'Mouse Pad', customer: 'David Lee', amount: 12.99, status: 'Delivered', date: '2025-11-22' },
      { id: 'ORD-008', product: 'USB Hub', customer: 'Emma Davis', amount: 34.99, status: 'Pending', date: '2025-11-21' },
      { id: 'ORD-009', product: 'Monitor Stand', customer: 'Chris Martin', amount: 56.99, status: 'Shipped', date: '2025-11-21' },
      { id: 'ORD-010', product: 'Charger Cable', customer: 'Rachel Green', amount: 19.99, status: 'Delivered', date: '2025-11-20' },
      { id: 'ORD-011', product: 'Phone Holder', customer: 'Mark Wilson', amount: 14.99, status: 'Pending', date: '2025-11-20' },
      { id: 'ORD-012', product: 'Desk Lamp', customer: 'Anna Taylor', amount: 39.99, status: 'Delivered', date: '2025-11-19' },
    ];

    // Sample Notifications Data
    const notifications = [
      { id: 1, title: 'Low Stock Alert', text: 'Wireless Headphones stock is below 10 units', unread: true },
      { id: 2, title: 'KYC Verification Pending', text: 'Complete your KYC verification to unlock more features', unread: true },
      { id: 3, title: 'Payout Processed', text: 'Your payout of $5,400 has been processed', unread: false },
      { id: 4, title: 'New Order Received', text: 'You have received 3 new orders today', unread: true },
      { id: 5, title: 'Return Request', text: 'Customer requested return for order ORD-006', unread: true },
    ];

    try {
      // State
      let currentPage = 1;
      const itemsPerPage = 10;
      let filteredOrders = [...orders];

      // DOM Elements - Get elements from loaded content
      const notifPanel = document.getElementById('notifPanel');
      const notifClose = document.getElementById('notifClose');
      const notifList = document.getElementById('notifList');
      const ordersTableBody = document.getElementById('ordersTableBody');
      const orderSearch = document.getElementById('orderSearch');
      const orderFilter = document.getElementById('orderFilter');
      const metricCards = document.querySelectorAll('.metric-value');

      // Get main page elements - but DON'T attach listeners to them
      // (main page already handles these)
      const sidebar = document.querySelector('aside.sidebar');
      const toggleBtn = document.querySelector('button.toggle-btn');
      const closeBtn = document.querySelector('button.close-btn');
      const overlay = document.getElementById('overlay');

      // DON'T attach event listeners here - main page handles them

      // Notifications Toggle
      document.addEventListener('click', (e) => {
        if (e.target.closest('.material-symbols-rounded') && e.target.textContent === 'notifications') {
          if (notifPanel) {
            notifPanel.classList.add('active');
          }
          if (overlay) {
            overlay.classList.add('active');
          }
        }
      });

      if (notifClose && notifPanel && overlay) {
        notifClose.addEventListener('click', () => {
          notifPanel.classList.remove('active');
          overlay.classList.remove('active');
        });
      }

      // Populate Notifications
      function renderNotifications() {
        if (!notifList) return;
        notifList.innerHTML = '';
        notifications.forEach(notif => {
          const li = document.createElement('li');
          li.className = `notif-item ${notif.unread ? 'unread' : ''}`;
          li.innerHTML = `
            <div class="notif-item-title">${notif.title}</div>
            <div class="notif-item-text">${notif.text}</div>
            <div class="notif-item-time">Just now</div>
          `;
          notifList.appendChild(li);
        });
      }

      // Render Orders Table
      function renderOrdersTable() {
        if (!ordersTableBody) return;
        ordersTableBody.innerHTML = '';
        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const pageItems = filteredOrders.slice(start, end);

        pageItems.forEach(order => {
          const row = document.createElement('tr');
          const statusClass = `status-${order.status.toLowerCase()}`;
          const button = document.createElement('button');
          button.className = 'btn-view';
          button.textContent = 'View Details';
          button.setAttribute('data-order-id', order.id);
          button.onclick = function() {
            showOrderDetails(order.id);
          };

          row.innerHTML = `
            <td><span class="order-id">${order.id}</span></td>
            <td>
              <div class="product-info">
                <div class="product-img">ðŸ“¦</div>
                <div class="product-name">${order.product}</div>
              </div>
            </td>
            <td>${order.customer}</td>
            <td>$${order.amount.toFixed(2)}</td>
            <td><span class="status-badge ${statusClass}">${order.status}</span></td>
            <td>${order.date}</td>
          `;
          
          const actionCell = document.createElement('td');
          actionCell.appendChild(button);
          row.appendChild(actionCell);
          ordersTableBody.appendChild(row);
        });

        renderPagination();
      }

      // Render Pagination
      function renderPagination() {
        const paginationDiv = document.getElementById('ordersPagination');
        if (!paginationDiv) return;
        paginationDiv.innerHTML = '';
        const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);

        const prevBtn = document.createElement('button');
        prevBtn.textContent = 'Prev';
        prevBtn.disabled = currentPage === 1;
        prevBtn.addEventListener('click', () => {
          if (currentPage > 1) {
            currentPage--;
            renderOrdersTable();
          }
        });
        paginationDiv.appendChild(prevBtn);

        for (let i = 1; i <= totalPages; i++) {
          const pageBtn = document.createElement('button');
          pageBtn.textContent = i;
          pageBtn.className = i === currentPage ? 'active' : '';
          pageBtn.addEventListener('click', () => {
            currentPage = i;
            renderOrdersTable();
          });
          paginationDiv.appendChild(pageBtn);
        }

        const nextBtn = document.createElement('button');
        nextBtn.textContent = 'Next';
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.addEventListener('click', () => {
          if (currentPage < totalPages) {
            currentPage++;
            renderOrdersTable();
          }
        });
        paginationDiv.appendChild(nextBtn);
      }

      // Search and Filter
      function updateFilteredOrders() {
        const searchValue = orderSearch ? orderSearch.value.toLowerCase() : '';
        const filterValue = orderFilter ? orderFilter.value : '';

        filteredOrders = orders.filter(order => {
          const matchesSearch = order.id.toLowerCase().includes(searchValue) ||
                              order.customer.toLowerCase().includes(searchValue) ||
                              order.product.toLowerCase().includes(searchValue);
          const matchesFilter = filterValue === '' || order.status === filterValue;
          return matchesSearch && matchesFilter;
        });

        currentPage = 1;
        renderOrdersTable();
      }

      if (orderSearch && orderFilter) {
        orderSearch.addEventListener('input', updateFilteredOrders);
        orderFilter.addEventListener('change', updateFilteredOrders);
      }

      // Show Order Details Modal
      function showOrderDetails(orderId) {
        const order = orders.find(o => o.id === orderId);
        if (!order) {
          alert('Order not found');
          return;
        }

        document.getElementById('modalTitle').textContent = `Order Details - ${order.id}`;
        document.getElementById('detailOrderId').textContent = order.id;
        document.getElementById('detailDate').textContent = order.date;
        document.getElementById('detailProduct').textContent = order.product;
        document.getElementById('detailCustomer').textContent = order.customer;
        document.getElementById('detailAmount').textContent = `$${order.amount.toFixed(2)}`;
        document.getElementById('detailStatus').textContent = order.status;

        // Update status badge styling based on status
        const statusEl = document.getElementById('detailStatus');
        statusEl.style.backgroundColor = '#e7f3ff';
        statusEl.style.color = '#0066c0';

        if (order.status === 'Delivered') {
          statusEl.style.backgroundColor = '#d4edda';
          statusEl.style.color = '#155724';
        } else if (order.status === 'Shipped') {
          statusEl.style.backgroundColor = '#fff3cd';
          statusEl.style.color = '#856404';
        } else if (order.status === 'Pending') {
          statusEl.style.backgroundColor = '#f8d7da';
          statusEl.style.color = '#721c24';
        } else if (order.status === 'Cancelled') {
          statusEl.style.backgroundColor = '#f5c6cb';
          statusEl.style.color = '#721c24';
        }

        // Show modal with proper display
        const modal = document.getElementById('orderDetailsModal');
        if (modal) {
          modal.style.display = 'flex';
          modal.style.visibility = 'visible';
          modal.style.opacity = '1';
        }
      }

      // Close modal
      function closeOrderModal() {
        const modal = document.getElementById('orderDetailsModal');
        if (modal) {
          modal.style.display = 'none';
        }
      }

      // Modal close button handlers - Immediate setup with error checking
      function setupModalHandlers() {
        const closeBtn = document.getElementById('closeOrderModal');
        const closeBtnAction = document.getElementById('closeOrderModalBtn');
        const modal = document.getElementById('orderDetailsModal');

        if (closeBtn) {
          closeBtn.onclick = closeOrderModal;
        }
        if (closeBtnAction) {
          closeBtnAction.onclick = closeOrderModal;
        }
        if (modal) {
          modal.onclick = function(e) {
            if (e.target === this) {
              closeOrderModal();
            }
          };
        }
      }
      
      setupModalHandlers();

      // Animate Metric Numbers
      function animateMetrics() {
        metricCards.forEach(card => {
          const target = parseInt(card.getAttribute('data-target'));
          const increment = Math.ceil(target / 30);
          let current = 0;

          const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
              current = target;
              clearInterval(timer);
            }
            card.textContent = current.toLocaleString();
          }, 30);
        });
      }

      // Draw Sales Chart
      function drawSalesChart(type = 'daily') {
        const canvas = document.getElementById('salesChart');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        const container = canvas.parentElement;
        const width = container.offsetWidth - 40;
        const height = 250;

        canvas.width = width;
        canvas.height = height;

        let data = [];
        let labels = [];

        if (type === 'daily') {
          data = [120, 190, 150, 175, 210, 180, 220];
          labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        } else if (type === 'weekly') {
          data = [1200, 1900, 1500, 1750, 2100, 1800, 2200, 2400];
          labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'];
        } else {
          data = [12000, 19000, 15000, 17500, 21000, 18000, 22000];
          labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
        }

        const maxValue = Math.max(...data);
        const padding = 40;
        const graphWidth = width - padding * 2;
        const graphHeight = height - padding * 2;
        const pointSpacing = graphWidth / (data.length - 1);

        // Draw grid
        ctx.strokeStyle = '#f0f0f0';
        ctx.lineWidth = 1;
        for (let i = 0; i <= 5; i++) {
          const y = padding + (graphHeight / 5) * i;
          ctx.beginPath();
          ctx.moveTo(padding, y);
          ctx.lineTo(width - padding, y);
          ctx.stroke();
        }

        // Draw line
        ctx.strokeStyle = '#0066c0';
        ctx.lineWidth = 3;
        ctx.beginPath();

        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          const y = height - padding - (value / maxValue) * graphHeight;
          if (index === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // Draw points
        ctx.fillStyle = '#0066c0';
        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          const y = height - padding - (value / maxValue) * graphHeight;
          ctx.beginPath();
          ctx.arc(x, y, 5, 0, Math.PI * 2);
          ctx.fill();
        });

        // Draw labels
        ctx.fillStyle = '#666';
        ctx.font = '12px Arial';
        ctx.textAlign = 'center';
        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          ctx.fillText(labels[index], x, height - padding + 20);
        });
      }

      // Draw Earnings Chart
      function drawEarningsChart(type = 'daily') {
        const canvas = document.getElementById('earningsChart');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        const container = canvas.parentElement;
        const width = container.offsetWidth - 40;
        const height = 250;

        canvas.width = width;
        canvas.height = height;

        let data = [];
        let labels = [];

        if (type === 'daily') {
          data = [850, 1200, 950, 1100, 1450, 1300, 1600];
          labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        } else if (type === 'weekly') {
          data = [8500, 12000, 9500, 11000, 14500, 13000, 16000, 18000];
          labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'];
        } else {
          data = [85000, 120000, 95000, 110000, 145000, 130000, 160000];
          labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
        }

        const maxValue = Math.max(...data);
        const padding = 40;
        const graphWidth = width - padding * 2;
        const graphHeight = height - padding * 2;
        const pointSpacing = graphWidth / (data.length - 1);

        // Draw grid
        ctx.strokeStyle = '#f0f0f0';
        ctx.lineWidth = 1;
        for (let i = 0; i <= 5; i++) {
          const y = padding + (graphHeight / 5) * i;
          ctx.beginPath();
          ctx.moveTo(padding, y);
          ctx.lineTo(width - padding, y);
          ctx.stroke();
        }

        // Draw line
        ctx.strokeStyle = '#28a745';
        ctx.lineWidth = 3;
        ctx.beginPath();

        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          const y = height - padding - (value / maxValue) * graphHeight;
          if (index === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // Draw points
        ctx.fillStyle = '#28a745';
        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          const y = height - padding - (value / maxValue) * graphHeight;
          ctx.beginPath();
          ctx.arc(x, y, 5, 0, Math.PI * 2);
          ctx.fill();
        });

        // Draw labels
        ctx.fillStyle = '#666';
        ctx.font = '12px Arial';
        ctx.textAlign = 'center';
        data.forEach((value, index) => {
          const x = padding + pointSpacing * index;
          ctx.fillText(labels[index], x, height - padding + 20);
        });
      }

      // Chart Tab Switching
      document.querySelectorAll('.chart-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          const chart = this.getAttribute('data-chart');
          const parent = this.closest('.chart-card');
          const siblings = parent.querySelectorAll('.chart-tab');

          siblings.forEach(s => s.classList.remove('active'));
          this.classList.add('active');

          if (parent.querySelector('#salesChart')) {
            drawSalesChart(chart);
          } else if (parent.querySelector('#earningsChart')) {
            const type = chart.replace('earnings-', '');
            drawEarningsChart(type);
          }
        });
      });

      // Initialize
      if (notifList) renderNotifications();
      if (ordersTableBody) renderOrdersTable();
      if (metricCards.length > 0) animateMetrics();
      drawSalesChart('daily');
      drawEarningsChart('daily');

      // Redraw charts on window resize
      let resizeTimer;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
          const activeSalesTab = document.querySelector('.chart-card:nth-of-type(1) .chart-tab.active');
          const activeEarningsTab = document.querySelector('.chart-card:nth-of-type(2) .chart-tab.active');
          
          if (activeSalesTab) {
            drawSalesChart(activeSalesTab.getAttribute('data-chart'));
          }
          if (activeEarningsTab) {
            drawEarningsChart(activeEarningsTab.getAttribute('data-chart'));
          }
        }, 250);
      });

    } catch (error) {
      console.error('Dashboard script error:', error);
    }
  </script>