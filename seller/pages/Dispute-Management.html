<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dispute Management - Seller Dashboard</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
    }

    /* ===== HEADER ===== */
    .header-btn {
      background-color: #232f3e;
      padding: 10px;
      display: flex;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
    }

    .toggle-btn {
      background: none;
      border: none;
      color: white;
      font-size: 26px;
      cursor: pointer;
    }

    .header-btn h2 {
      color: white;
      margin-left: 20px;
      font-size: 20px;
    }

    /* ===== SIDEBAR ===== */
    .sidebar {
      position: fixed;
      top: 0;
      left: -260px;
      width: 260px;
      height: 100%;
      background-color: #232f3e;
      color: white;
      transition: left 0.3s ease;
      display: flex;
      flex-direction: column;
      z-index: 1000;
      padding-top: 60px;
    }

    .sidebar.active {
      left: 0;
    }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: #131921;
    }

    .sidebar-header h2 {
      font-size: 18px;
      font-weight: 600;
    }

    .close-btn {
      background: none;
      border: none;
      color: white;
      font-size: 26px;
      cursor: pointer;
    }

    .nav-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .nav-item {
      padding: 0;
    }

    .nav-item a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      cursor: pointer;
      transition: background-color 0.2s;
      font-size: 14px;
    }

    .nav-item a:hover {
      background-color: #37475a;
    }

    .nav-item a.active {
      background-color: #37475a;
    }

    /* ===== OVERLAY ===== */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      opacity: 0;
      visibility: hidden;
      transition: 0.3s;
      z-index: 500;
    }

    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* ===== MAIN CONTENT ===== */
    .main-content {
      padding: 20px;
      margin-top: 60px;
    }

    .main-content h1 {
      color: #232f3e;
      margin-bottom: 20px;
      font-size: 24px;
    }

    /* ===== TABS ===== */
    .tabs-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .tab-btn {
      padding: 10px 20px;
      border: 2px solid transparent;
      background-color: #f3f4f6;
      color: #333;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .tab-btn:hover {
      background-color: #e5e7eb;
    }

    .tab-btn.active {
      background-color: #232f3e;
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ===== SUMMARY CARDS ===== */
    .summary-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 40px;
    }

    .summary-card {
      flex: 1 1 200px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      border-left: 5px solid;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .summary-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
    }

    .summary-card p {
      opacity: 0.6;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .summary-value {
      font-size: 24px;
      font-weight: 700;
      color: #232f3e;
    }

    /* ===== SECTION HEADER ===== */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #232f3e;
    }

    .search-filter {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .search-bar {
      position: relative;
      flex: 1;
      min-width: 200px;
    }

    .search-bar input {
      width: 100%;
      padding: 10px 15px 10px 40px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
    }

    .search-bar input:focus {
      outline: none;
      border-color: #232f3e;
      box-shadow: 0 0 0 3px rgba(35, 47, 62, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      font-size: 18px;
      pointer-events: none;
    }

    .filter-select {
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 13px;
      background-color: white;
      cursor: pointer;
      min-width: 140px;
    }

    .filter-select:focus {
      outline: none;
      border-color: #232f3e;
    }

    /* ===== DISPUTES TABLE ===== */
    .disputes-section {
      background-color: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    .data-table thead tr {
      border-bottom: 2px solid #ddd;
      background-color: #f5f5f5;
    }

    .data-table th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #232f3e;
      font-size: 13px;
      text-transform: uppercase;
    }

    .data-table tbody tr {
      border-bottom: 1px solid #ddd;
      transition: background-color 0.2s;
    }

    .data-table tbody tr:hover {
      background-color: #f9fafb;
    }

    .data-table td {
      padding: 15px;
      font-size: 13px;
    }

    .dispute-id {
      font-weight: 600;
      color: #232f3e;
    }

    .status-badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .badge-pending {
      background-color: #fef3cd;
      color: #856404;
    }

    .badge-review {
      background-color: #cfe2ff;
      color: #084298;
    }

    .badge-resolved {
      background-color: #d1e7dd;
      color: #0f5132;
    }

    .badge-rejected {
      background-color: #f8d7da;
      color: #721c24;
    }

    .type-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      background-color: #e7e8eb;
      color: #333;
    }

    .btn-view {
      background: none;
      border: none;
      color: #0066c0;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      padding: 5px 10px;
      transition: color 0.2s;
    }

    .btn-view:hover {
      color: #232f3e;
      text-decoration: underline;
    }

    /* ===== PAGINATION ===== */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }

    .pagination button {
      padding: 8px 12px;
      border: 1px solid #ddd;
      background-color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }

    .pagination button:hover {
      background-color: #f5f5f5;
      border-color: #232f3e;
    }

    .pagination button.active {
      background-color: #232f3e;
      color: white;
      border-color: #232f3e;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* ===== RAISE DISPUTE FORM ===== */
    .form-container {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      max-width: 700px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #232f3e;
      font-size: 14px;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      font-family: Arial, sans-serif;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #232f3e;
      box-shadow: 0 0 0 3px rgba(35, 47, 62, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 120px;
    }

    /* ===== FILE UPLOAD ===== */
    .file-upload-area {
      border: 2px dashed #ddd;
      border-radius: 8px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: #f9fafb;
    }

    .file-upload-area:hover {
      border-color: #232f3e;
      background-color: #f3f4f6;
    }

    .file-upload-area.dragover {
      border-color: #232f3e;
      background-color: #e7e8eb;
    }

    .file-upload-area input {
      display: none;
    }

    .upload-icon {
      font-size: 32px;
      margin-bottom: 10px;
      color: #666;
    }

    .upload-text {
      color: #333;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .upload-subtext {
      color: #999;
      font-size: 12px;
    }

    .file-preview {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 15px;
    }

    .file-item {
      position: relative;
      width: 100px;
      height: 100px;
      border-radius: 6px;
      background-color: #f5f5f5;
      overflow: hidden;
      border: 1px solid #ddd;
    }

    .file-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .file-item .remove-btn {
      position: absolute;
      top: 2px;
      right: 2px;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ===== BUTTONS ===== */
    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background-color: #232f3e;
      color: white;
    }

    .btn-primary:hover {
      background-color: #37475a;
    }

    .btn-secondary {
      background-color: #f3f4f6;
      color: #333;
      border: 1px solid #ddd;
    }

    .btn-secondary:hover {
      background-color: #e5e7eb;
    }

    /* ===== MODAL ===== */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background-color: white;
      border-radius: 10px;
      max-width: 1000px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }

    .modal-header {
      padding: 20px;
      background-color: #232f3e;
      color: white;
      border-radius: 10px 10px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      margin: 0;
      font-size: 20px;
    }

    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 28px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
    }

    .modal-body {
      padding: 30px;
    }

    /* ===== DETAIL GRID ===== */
    .detail-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .detail-section {
      background-color: #f9fafb;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
    }

    .detail-section h3 {
      margin: 0 0 15px 0;
      color: #232f3e;
      font-size: 16px;
      font-weight: 600;
    }

    .detail-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .detail-item label {
      color: #666;
      font-weight: 600;
    }

    .detail-item value {
      color: #333;
      text-align: right;
    }

    /* ===== TIMELINE ===== */
    .timeline {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      margin-bottom: 30px;
    }

    .timeline h3 {
      margin: 0 0 20px 0;
      color: #232f3e;
    }

    .timeline-item {
      display: flex;
      gap: 20px;
      margin-bottom: 25px;
      position: relative;
    }

    .timeline-item:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 11px;
      top: 30px;
      width: 2px;
      height: 40px;
      background-color: #ddd;
    }

    .timeline-dot {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #e5e7eb;
      border: 3px solid white;
      box-shadow: 0 0 0 2px #ddd;
      flex-shrink: 0;
    }

    .timeline-item.active .timeline-dot {
      background-color: #232f3e;
      box-shadow: 0 0 0 2px #ddd;
    }

    .timeline-dot.completed {
      background-color: #28a745;
      box-shadow: 0 0 0 2px #ddd;
    }

    .timeline-content {
      padding-top: 2px;
      flex: 1;
    }

    .timeline-content h4 {
      margin: 0;
      color: #333;
      font-size: 14px;
    }

    .timeline-content p {
      margin: 5px 0 0 0;
      font-size: 12px;
      color: #999;
    }

    /* ===== EVIDENCE GALLERY ===== */
    .evidence-gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 15px;
    }

    .evidence-item {
      width: 120px;
      height: 120px;
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid #ddd;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .evidence-item:hover {
      transform: scale(1.05);
    }

    .evidence-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ===== ADMIN DECISION BOX ===== */
    .admin-decision {
      background-color: #f0f8ff;
      border-left: 4px solid #0066c0;
      padding: 20px;
      border-radius: 6px;
      margin-bottom: 30px;
    }

    .admin-decision h3 {
      color: #0066c0;
      margin: 0 0 10px 0;
    }

    .decision-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .decision-item label {
      font-weight: 600;
      color: #333;
    }

    .decision-item value {
      color: #666;
    }

    /* ===== NOTIFICATION CARDS ===== */
    .notifications-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .notif-card {
      background: white;
      border-left: 4px solid;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .notif-card.alert {
      border-left-color: #dc3545;
    }

    .notif-card.info {
      border-left-color: #0066c0;
    }

    .notif-card.success {
      border-left-color: #28a745;
    }

    .notif-title {
      font-weight: 600;
      color: #232f3e;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .notif-text {
      font-size: 13px;
      color: #666;
      line-height: 1.5;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 1080px) {
      .detail-grid {
        grid-template-columns: 1fr;
      }

      .summary-card {
        flex: 1 1 48%;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 260px;
        left: -260px;
      }

      .sidebar.active {
        left: 0;
      }

      .main-content {
        padding: 15px;
      }

      .toggle-btn {
        display: block;
      }

      .close-btn {
        display: block;
      }

      .summary-card {
        flex: 1 1 100%;
      }

      .section-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .search-filter {
        flex-direction: column;
        width: 100%;
      }

      .search-bar {
        width: 100%;
      }

      .filter-select {
        width: 100%;
      }

      .data-table {
        font-size: 12px;
      }

      .data-table th,
      .data-table td {
        padding: 10px;
      }

      .modal-content {
        width: 95%;
      }

      .modal-body {
        padding: 15px;
      }

      .form-container {
        padding: 20px;
      }

      .notifications-container {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      .summary-card {
        flex: 1 1 100%;
      }

      .tabs-container {
        flex-direction: column;
      }

      .tab-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <div class="header-btn">
        <button class="toggle-btn" id="toggleBtn"><span class="material-symbols-rounded">menu</span></button>
        <h2>Seller Dashboard</h2>
      </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Seller Hub</h2>
        <button class="close-btn" id="closeBtn"><span class="material-symbols-rounded">close</span></button>
      </div>
      <ul class="nav-menu">
        <li class="nav-item"><a href="#">Dashboard</a></li>
        <li class="nav-item"><a href="#">Products</a></li>
        <li class="nav-item"><a href="#">Orders</a></li>
        <li class="nav-item"><a href="#">Inventory</a></li>
        <li class="nav-item"><a href="#">Returns</a></li>
        <li class="nav-item"><a href="#" class="active">Disputes</a></li>
        <li class="nav-item"><a href="#">Analytics</a></li>
        <li class="nav-item"><a href="#">Settings</a></li>
      </ul>
    </aside>

    <div class="overlay" id="overlay"></div>

    <!-- Main Content -->
    <div class="main-content">
      <h1>Dispute Management</h1>

      <!-- Tabs -->
      <div class="tabs-container">
        <button class="tab-btn active" onclick="switchTab('disputes')"><span class="material-symbols-rounded" style="font-size: 20px;">list</span> My Disputes</button>
        <button class="tab-btn" onclick="openRaiseDisputeModal()"><span class="material-symbols-rounded" style="font-size: 20px;">add_circle</span> Raise New Dispute</button>
      </div>

      <!-- TAB 1: MY DISPUTES -->
      <div id="disputes-tab" class="tab-content active">
        <!-- Summary Cards -->
        <div class="summary-cards">
          <div class="summary-card" style="border-left-color: #ffc107;">
            <p>Total Disputes</p>
            <div class="summary-value" id="totalDisputes">0</div>
          </div>
          <div class="summary-card" style="border-left-color: #ffc107;">
            <p>Pending Review</p>
            <div class="summary-value" id="pendingDisputes">0</div>
          </div>
          <div class="summary-card" style="border-left-color: #28a745;">
            <p>Resolved</p>
            <div class="summary-value" id="resolvedDisputes">0</div>
          </div>
          <div class="summary-card" style="border-left-color: #dc3545;">
            <p>Rejected</p>
            <div class="summary-value" id="rejectedDisputes">0</div>
          </div>
        </div>

        <!-- Disputes Section -->
        <div class="disputes-section">
          <div class="section-header">
            <div class="section-title">Your Disputes</div>
            <div class="search-filter">
              <div class="search-bar">
                <span class="search-icon material-symbols-rounded">search</span>
                <input type="text" id="searchInput" placeholder="Search by Dispute ID, Order ID...">
              </div>
              <select class="filter-select" id="typeFilter">
                <option value="">All Types</option>
                <option value="Return issue">Return Issue</option>
                <option value="Payment issue">Payment Issue</option>
                <option value="Policy issue">Policy Issue</option>
                <option value="Other">Other</option>
              </select>
              <select class="filter-select" id="statusFilter">
                <option value="">All Status</option>
                <option value="Pending">Pending</option>
                <option value="Under Review">Under Review</option>
                <option value="Resolved">Resolved</option>
                <option value="Rejected">Rejected</option>
              </select>
            </div>
          </div>

          <table class="data-table" id="disputesTable">
            <thead>
              <tr>
                <th>Dispute ID</th>
                <th>Type</th>
                <th>Order ID</th>
                <th>Date Raised</th>
                <th>Status</th>
                <th>Admin Decision</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="disputesTableBody">
            </tbody>
          </table>

          <div id="disputesPagination" class="pagination"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- Raise Dispute Modal -->
  <div class="modal" id="raiseDisputeModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Raise a New Dispute</h2>
        <button class="modal-close" id="raiseModalClose">&times;</button>
      </div>
      <div class="modal-body">
        <form id="raiseDisputeForm" onsubmit="submitDisputeForm(event)">
          <div class="form-group">
            <label>Dispute Type <span style="color: #dc3545;">*</span></label>
            <select id="disputeType" required>
              <option value="">Select a dispute type</option>
              <option value="Return issue">Return Issue</option>
              <option value="Payment issue">Payment Issue</option>
              <option value="Policy issue">Policy Issue</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label>Order ID <span style="color: #dc3545;">*</span></label>
            <select id="orderId" required>
              <option value="">Select an order</option>
              <option value="ORD-1001">ORD-1001 (Wireless Headphones)</option>
              <option value="ORD-1002">ORD-1002 (USB Cable)</option>
              <option value="ORD-1003">ORD-1003 (Phone Case)</option>
              <option value="ORD-1004">ORD-1004 (Laptop Stand)</option>
              <option value="ORD-1005">ORD-1005 (Keyboard)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Description <span style="color: #dc3545;">*</span></label>
            <textarea id="description" placeholder="Explain your dispute in detail..." required></textarea>
          </div>

          <div class="form-group">
            <label>Upload Evidence (Images/PDF)</label>
            <div class="file-upload-area" id="fileUploadArea">
              <div class="upload-icon"><span class="material-symbols-rounded">cloud_upload</span></div>
              <div class="upload-text">Drag & drop files or click to upload</div>
              <div class="upload-subtext">Supported: JPG, PNG, PDF (Max 5MB each)</div>
              <input type="file" id="fileInput" accept="image/*,.pdf" multiple>
            </div>
            <div class="file-preview" id="filePreview"></div>
          </div>

          <div style="display: flex; gap: 12px;">
            <button type="submit" class="btn btn-primary">
              <span class="material-symbols-rounded">send</span> Submit Dispute
            </button>
            <button type="reset" class="btn btn-secondary">
              <span class="material-symbols-rounded">refresh</span> Clear Form
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Detail Modal -->
  <div class="modal" id="detailModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Dispute Details</h2>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Dispute Info -->
        <div class="detail-grid">
          <div class="detail-section">
            <h3>üìã Dispute Information</h3>
            <div class="detail-item">
              <label>Dispute ID:</label>
              <value id="detailDisputeId"></value>
            </div>
            <div class="detail-item">
              <label>Type:</label>
              <value id="detailType"></value>
            </div>
            <div class="detail-item">
              <label>Date Raised:</label>
              <value id="detailDateRaised"></value>
            </div>
            <div class="detail-item">
              <label>Status:</label>
              <value id="detailStatus"></value>
            </div>
          </div>

          <div class="detail-section">
            <h3>üì¶ Order Information</h3>
            <div class="detail-item">
              <label>Order ID:</label>
              <value id="detailOrderId"></value>
            </div>
            <div class="detail-item">
              <label>Amount:</label>
              <value id="detailAmount"></value>
            </div>
            <div class="detail-item">
              <label>Date Ordered:</label>
              <value id="detailDateOrdered"></value>
            </div>
            <div class="detail-item">
              <label>Assigned Reviewer:</label>
              <value id="detailReviewer"></value>
            </div>
          </div>
        </div>

        <!-- Description -->
        <div class="detail-section" style="margin-bottom: 30px;">
          <h3>üìù Your Reason</h3>
          <p id="detailDescription" style="margin-top: 10px; line-height: 1.6; color: #333; font-size: 14px;"></p>
        </div>

        <!-- Evidence -->
        <div class="detail-section" style="margin-bottom: 30px;">
          <h3>üì∏ Uploaded Evidence</h3>
          <div class="evidence-gallery" id="detailEvidence"></div>
        </div>

        <!-- Timeline -->
        <div class="timeline">
          <h3>üïí Dispute Timeline</h3>
          <div id="detailTimeline"></div>
        </div>

        <!-- Admin Decision (if resolved) -->
        <div id="adminDecisionBox" class="admin-decision" style="display: none;">
          <h3>‚úÖ Admin Decision</h3>
          <div class="decision-item">
            <label>Decision:</label>
            <value id="adminDecision"></value>
          </div>
          <div class="decision-item">
            <label>Comments:</label>
            <value id="adminComments"></value>
          </div>
          <div class="decision-item">
            <label>Compensation:</label>
            <value id="adminCompensation"></value>
          </div>
          <div class="decision-item">
            <label>Decision Date:</label>
            <value id="adminDecisionDate"></value>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== DUMMY DATA =====
    const dummyDisputes = [
      {
        id: 'DSP-001',
        type: 'Return issue',
        orderId: 'ORD-1001',
        dateRaised: '2025-11-25',
        dateOrdered: '2025-11-20',
        status: 'Pending',
        amount: 89.99,
        description: 'Customer refuses to accept the returned item. Says the item was damaged on arrival.',
        evidence: ['https://via.placeholder.com/120?text=Photo+1', 'https://via.placeholder.com/120?text=Photo+2'],
        reviewer: 'Admin - John Smith',
        timeline: ['Raised'],
        adminDecision: null
      },
      {
        id: 'DSP-002',
        type: 'Payment issue',
        orderId: 'ORD-1002',
        dateRaised: '2025-11-24',
        dateOrdered: '2025-11-18',
        status: 'Under Review',
        amount: 45.50,
        description: 'Customer charged twice for the same order. Request for refund of duplicate payment.',
        evidence: ['https://via.placeholder.com/120?text=Receipt'],
        reviewer: 'Admin - Sarah Lee',
        timeline: ['Raised', 'Under Review'],
        adminDecision: null
      },
      {
        id: 'DSP-003',
        type: 'Policy issue',
        orderId: 'ORD-1003',
        dateRaised: '2025-11-22',
        dateOrdered: '2025-11-10',
        status: 'Resolved',
        amount: 120.00,
        description: 'Seller violated return policy by refusing to accept return request after 15 days.',
        evidence: [],
        reviewer: 'Admin - Mike Johnson',
        timeline: ['Raised', 'Under Review', 'Resolved'],
        adminDecision: {
          decision: 'Approved',
          comments: 'Return period was still valid. Seller must accept return.',
          compensation: 120.00,
          date: '2025-11-24'
        }
      },
      {
        id: 'DSP-004',
        type: 'Other',
        orderId: 'ORD-1004',
        dateRaised: '2025-11-21',
        dateOrdered: '2025-11-15',
        status: 'Rejected',
        amount: 34.99,
        description: 'Customer complaint about slow delivery. But tracking shows delivery on time.',
        evidence: [],
        reviewer: 'Admin - Emma Davis',
        timeline: ['Raised', 'Under Review', 'Resolved'],
        adminDecision: {
          decision: 'Rejected',
          comments: 'No valid reason found. Order delivered within promised timeframe.',
          compensation: 0,
          date: '2025-11-23'
        }
      },
      {
        id: 'DSP-005',
        type: 'Return issue',
        orderId: 'ORD-1005',
        dateRaised: '2025-11-20',
        dateOrdered: '2025-11-12',
        status: 'Resolved',
        amount: 79.99,
        description: 'Wrong item sent to customer. Item received was not matching the order.',
        evidence: ['https://via.placeholder.com/120?text=Wrong+Item'],
        reviewer: 'Admin - John Smith',
        timeline: ['Raised', 'Under Review', 'Resolved'],
        adminDecision: {
          decision: 'Approved',
          comments: 'Clear error on seller side. Full refund approved.',
          compensation: 79.99,
          date: '2025-11-22'
        }
      },
      {
        id: 'DSP-006',
        type: 'Payment issue',
        orderId: 'ORD-1006',
        dateRaised: '2025-11-19',
        dateOrdered: '2025-11-14',
        status: 'Under Review',
        amount: 55.75,
        description: 'Payment gateway error. Money deducted but order not placed. Need to process order.',
        evidence: ['https://via.placeholder.com/120?text=Bank+Slip'],
        reviewer: 'Admin - Sarah Lee',
        timeline: ['Raised', 'Under Review'],
        adminDecision: null
      }
    ];

    const dummyNotifications = [
      { type: 'alert', title: 'Admin Requested Evidence', text: 'Admin has requested additional evidence for dispute DSP-002. Please upload within 48 hours.' },
      { type: 'success', title: 'Dispute Resolved', text: 'Dispute DSP-003 has been resolved. Full compensation of $120.00 approved.' },
      { type: 'info', title: 'Dispute Escalated', text: 'Dispute DSP-001 has been escalated to senior admin for final decision.' },
      { type: 'alert', title: 'Action Required', text: 'Dispute DSP-005 resolved with compensation. Please process refund within 48 hours.' },
      { type: 'success', title: 'Dispute Created', text: 'Your new dispute DSP-006 has been created and assigned to an admin reviewer.' },
      { type: 'info', title: 'Status Update', text: 'Dispute DSP-004 status changed to Rejected. You can view the decision in dispute details.' }
    ];

    // ===== STATE =====
    let disputes = JSON.parse(JSON.stringify(dummyDisputes));
    let filteredDisputes = [...disputes];
    let currentPage = 1;
    const itemsPerPage = 10;
    let currentDisputeDetail = null;
    let uploadedFiles = [];

    // ===== DOM ELEMENTS =====
    const sidebar = document.querySelector('.sidebar');
    const toggleBtn = document.getElementById('toggleBtn');
    const closeBtn = document.getElementById('closeBtn');
    const overlay = document.getElementById('overlay');
    const detailModal = document.getElementById('detailModal');
    const modalClose = document.getElementById('modalClose');
    const raiseDisputeModal = document.getElementById('raiseDisputeModal');
    const raiseModalClose = document.getElementById('raiseModalClose');

    // ===== SIDEBAR TOGGLE =====
    toggleBtn.addEventListener('click', () => {
      sidebar.classList.add('active');
      overlay.classList.add('active');
    });

    closeBtn.addEventListener('click', () => {
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
      if (detailModal.classList.contains('active')) {
        detailModal.classList.remove('active');
      }
      if (raiseDisputeModal.classList.contains('active')) {
        raiseDisputeModal.classList.remove('active');
      }
    });

    modalClose.addEventListener('click', () => {
      detailModal.classList.remove('active');
      overlay.classList.remove('active');
    });

    raiseModalClose.addEventListener('click', () => {
      raiseDisputeModal.classList.remove('active');
      overlay.classList.remove('active');
    });

    // ===== OPEN RAISE DISPUTE MODAL =====
    function openRaiseDisputeModal() {
      raiseDisputeModal.classList.add('active');
      overlay.classList.add('active');
    }

    // ===== TAB SWITCHING =====
    function switchTab(tabName) {
      const tabs = document.querySelectorAll('.tab-content');
      const btns = document.querySelectorAll('.tab-btn');

      tabs.forEach(tab => tab.classList.remove('active'));
      btns.forEach(btn => btn.classList.remove('active'));

      document.getElementById(tabName + '-tab').classList.add('active');
      event.target.classList.add('active');
    }

    // ===== SEARCH & FILTER =====
    function applyFilters() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const typeTerm = document.getElementById('typeFilter').value;
      const statusTerm = document.getElementById('statusFilter').value;

      filteredDisputes = disputes.filter(d => {
        const matchSearch = 
          d.id.toLowerCase().includes(searchTerm) ||
          d.orderId.toLowerCase().includes(searchTerm);
        
        const matchType = typeTerm === '' || d.type === typeTerm;
        const matchStatus = statusTerm === '' || d.status === statusTerm;

        return matchSearch && matchType && matchStatus;
      });

      currentPage = 1;
      renderDisputesTable();
      updateSummary();
    }

    document.getElementById('searchInput').addEventListener('input', applyFilters);
    document.getElementById('typeFilter').addEventListener('change', applyFilters);
    document.getElementById('statusFilter').addEventListener('change', applyFilters);

    // ===== RENDER TABLE =====
    function renderDisputesTable() {
      const tbody = document.getElementById('disputesTableBody');
      tbody.innerHTML = '';
      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const pageData = filteredDisputes.slice(start, end);

      if (pageData.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="7" style="text-align: center; padding: 40px; color: #999;">
              No disputes found
            </td>
          </tr>
        `;
        renderPagination();
        return;
      }

      pageData.forEach(d => {
        const statusClass = `badge-${d.status.toLowerCase().replace(' ', '-')}`;
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><span class="dispute-id">${d.id}</span></td>
          <td><span class="type-badge">${d.type}</span></td>
          <td>${d.orderId}</td>
          <td>${d.dateRaised}</td>
          <td><span class="status-badge ${statusClass}">${d.status}</span></td>
          <td>${d.adminDecision ? d.adminDecision.decision : 'Pending'}</td>
          <td><button class="btn-view" onclick="viewDisputeDetail('${d.id}')">View</button></td>
        `;
        tbody.appendChild(row);
      });

      renderPagination();
    }

    // ===== PAGINATION =====
    function renderPagination() {
      const paginationDiv = document.getElementById('disputesPagination');
      paginationDiv.innerHTML = '';
      const totalPages = Math.ceil(filteredDisputes.length / itemsPerPage);

      const prevBtn = document.createElement('button');
      prevBtn.textContent = 'Prev';
      prevBtn.disabled = currentPage === 1;
      prevBtn.addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          renderDisputesTable();
        }
      });
      paginationDiv.appendChild(prevBtn);

      for (let i = 1; i <= totalPages; i++) {
        const pageBtn = document.createElement('button');
        pageBtn.textContent = i;
        pageBtn.className = i === currentPage ? 'active' : '';
        pageBtn.addEventListener('click', () => {
          currentPage = i;
          renderDisputesTable();
        });
        paginationDiv.appendChild(pageBtn);
      }

      const nextBtn = document.createElement('button');
      nextBtn.textContent = 'Next';
      nextBtn.disabled = currentPage === totalPages;
      nextBtn.addEventListener('click', () => {
        if (currentPage < totalPages) {
          currentPage++;
          renderDisputesTable();
        }
      });
      paginationDiv.appendChild(nextBtn);
    }

    // ===== VIEW DETAIL =====
    function viewDisputeDetail(disputeId) {
      currentDisputeDetail = disputes.find(d => d.id === disputeId);
      if (!currentDisputeDetail) return;

      // Populate modal
      document.getElementById('modalTitle').textContent = `Dispute Details - ${currentDisputeDetail.id}`;
      document.getElementById('detailDisputeId').textContent = currentDisputeDetail.id;
      document.getElementById('detailType').textContent = currentDisputeDetail.type;
      document.getElementById('detailDateRaised').textContent = currentDisputeDetail.dateRaised;
      document.getElementById('detailStatus').innerHTML = `<span class="status-badge badge-${currentDisputeDetail.status.toLowerCase().replace(' ', '-')}">${currentDisputeDetail.status}</span>`;
      document.getElementById('detailOrderId').textContent = currentDisputeDetail.orderId;
      document.getElementById('detailAmount').textContent = `$${currentDisputeDetail.amount.toFixed(2)}`;
      document.getElementById('detailDateOrdered').textContent = currentDisputeDetail.dateOrdered;
      document.getElementById('detailReviewer').textContent = currentDisputeDetail.reviewer;
      document.getElementById('detailDescription').textContent = currentDisputeDetail.description;

      // Evidence
      const evidenceDiv = document.getElementById('detailEvidence');
      evidenceDiv.innerHTML = '';
      if (currentDisputeDetail.evidence.length > 0) {
        currentDisputeDetail.evidence.forEach(img => {
          const item = document.createElement('div');
          item.className = 'evidence-item';
          item.innerHTML = `<img src="${img}" alt="evidence">`;
          evidenceDiv.appendChild(item);
        });
      } else {
        evidenceDiv.innerHTML = '<p style="color: #999;">No evidence uploaded</p>';
      }

      // Timeline
      renderDisputeTimeline();

      // Admin Decision
      const decisionBox = document.getElementById('adminDecisionBox');
      if (currentDisputeDetail.adminDecision) {
        decisionBox.style.display = 'block';
        document.getElementById('adminDecision').textContent = currentDisputeDetail.adminDecision.decision;
        document.getElementById('adminComments').textContent = currentDisputeDetail.adminDecision.comments;
        document.getElementById('adminCompensation').textContent = `$${currentDisputeDetail.adminDecision.compensation.toFixed(2)}`;
        document.getElementById('adminDecisionDate').textContent = currentDisputeDetail.adminDecision.date;
      } else {
        decisionBox.style.display = 'none';
      }

      detailModal.classList.add('active');
      overlay.classList.add('active');
    }

    // ===== TIMELINE RENDER =====
    function renderDisputeTimeline() {
      const timelineDiv = document.getElementById('detailTimeline');
      timelineDiv.innerHTML = '';

      const steps = [
        { label: 'Dispute Raised', key: 'Raised' },
        { label: 'Under Review', key: 'Under Review' },
        { label: 'Decision Made', key: 'Resolved' }
      ];

      steps.forEach((step, idx) => {
        const isCompleted = currentDisputeDetail.timeline.includes(step.key);

        const timelineItem = document.createElement('div');
        timelineItem.className = `timeline-item`;

        const dot = document.createElement('div');
        dot.className = `timeline-dot ${isCompleted ? 'completed' : ''}`;
        timelineItem.appendChild(dot);

        const content = document.createElement('div');
        content.className = 'timeline-content';
        content.innerHTML = `
          <h4>${step.label}</h4>
          <p>${isCompleted ? 'Completed' : 'Pending'}</p>
        `;
        timelineItem.appendChild(content);

        timelineDiv.appendChild(timelineItem);
      });
    }

    // ===== FILE UPLOAD =====
    const fileUploadArea = document.getElementById('fileUploadArea');
    const fileInput = document.getElementById('fileInput');
    const filePreview = document.getElementById('filePreview');

    fileUploadArea.addEventListener('click', () => fileInput.click());
    fileUploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileUploadArea.classList.add('dragover');
    });
    fileUploadArea.addEventListener('dragleave', () => {
      fileUploadArea.classList.remove('dragover');
    });
    fileUploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      fileUploadArea.classList.remove('dragover');
      handleFiles(e.dataTransfer.files);
    });

    fileInput.addEventListener('change', (e) => {
      handleFiles(e.target.files);
    });

    function handleFiles(files) {
      uploadedFiles = Array.from(files).slice(0, 5); // Max 5 files
      filePreview.innerHTML = '';

      uploadedFiles.forEach((file, idx) => {
        const item = document.createElement('div');
        item.className = 'file-item';

        if (file.type.startsWith('image')) {
          const reader = new FileReader();
          reader.onload = (e) => {
            item.innerHTML = `
              <img src="${e.target.result}" alt="preview">
              <button type="button" class="remove-btn" onclick="removeFile(${idx})">√ó</button>
            `;
          };
          reader.readAsDataURL(file);
        } else {
          item.innerHTML = `
            <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f5f5f5;">
              <span class="material-symbols-rounded" style="font-size: 48px; color: #999;">description</span>
            </div>
            <button type="button" class="remove-btn" onclick="removeFile(${idx})">√ó</button>
          `;
        }

        filePreview.appendChild(item);
      });
    }

    function removeFile(idx) {
      uploadedFiles.splice(idx, 1);
      handleFiles(uploadedFiles);
    }

    // ===== SUBMIT DISPUTE FORM =====
    function submitDisputeForm(e) {
      e.preventDefault();

      const type = document.getElementById('disputeType').value;
      const orderId = document.getElementById('orderId').value;
      const description = document.getElementById('description').value;

      if (!type || !orderId || !description) {
        alert('Please fill all required fields');
        return;
      }

      const newDispute = {
        id: `DSP-${String(disputes.length + 1).padStart(3, '0')}`,
        type,
        orderId,
        dateRaised: new Date().toISOString().split('T')[0],
        dateOrdered: '2025-11-20',
        status: 'Pending',
        amount: Math.random() * 100 + 20,
        description,
        evidence: [],
        reviewer: 'Pending Assignment',
        timeline: ['Raised'],
        adminDecision: null
      };

      disputes.push(newDispute);
      filteredDisputes = [...disputes];
      
      alert(`Dispute ${newDispute.id} created successfully!`);
      document.getElementById('raiseDisputeForm').reset();
      filePreview.innerHTML = '';
      uploadedFiles = [];
      updateSummary();
      raiseDisputeModal.classList.remove('active');
      overlay.classList.remove('active');
      renderDisputesTable();
    }

    // ===== SUMMARY =====
    function updateSummary() {
      const total = disputes.length;
      const pending = disputes.filter(d => d.status === 'Pending').length;
      const resolved = disputes.filter(d => d.status === 'Resolved').length;
      const rejected = disputes.filter(d => d.status === 'Rejected').length;

      document.getElementById('totalDisputes').textContent = total;
      document.getElementById('pendingDisputes').textContent = pending;
      document.getElementById('resolvedDisputes').textContent = resolved;
      document.getElementById('rejectedDisputes').textContent = rejected;
    }

    // ===== INIT =====
    renderDisputesTable();
    updateSummary();
  </script>
</body>
</html>
